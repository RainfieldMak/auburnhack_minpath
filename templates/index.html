<!DOCTYPE html>
<html>
<head>
    <title>Route Planner</title>
</head>
<body>
    <h1>Route Planner</h1>
    <form method="POST" action="{{ url_for('submit') }}">
        <label for="start">Start:</label>
        <input type="text" id="start" name="start" required><br><br>

        <label for="end">End:</label>
        <input type="text" id="end" name="end" required><br><br>

        <fieldset>
            <legend>Waypoints:</legend>
            <div id="waypoints-container">
                <div class="waypoint">
                    <label for="waypoint-1">Waypoint 1:</label>
                    <input type="text" id="waypoint-1" name="waypoints[]" required>
                    <button type="button" class="remove-waypoint">Remove</button>
                </div>
            </div>
            <button type="button" id="add-waypoint">Add Waypoint</button>
        </fieldset>

        <br><br>
        <input type="submit" value="Submit">
    </form>

    <script>
        let nextWaypointNum = 2;

        const addWaypointButton = document.getElementById('add-waypoint');
        const waypointsContainer = document.getElementById('waypoints-container');

        addWaypointButton.addEventListener('click', () => {
            const newWaypoint = document.createElement('div');
            newWaypoint.className = 'waypoint';

            const newWaypointLabel = document.createElement('label');
            newWaypointLabel.textContent = `Waypoint ${nextWaypointNum}:`;

            const newWaypointInput = document.createElement('input');
            newWaypointInput.type = 'text';
            newWaypointInput.id = `waypoint-${nextWaypointNum}`;
            newWaypointInput.name = 'waypoints[]';
            newWaypointInput.required = true;

            const removeWaypointButton = document.createElement('button');
            removeWaypointButton.type = 'button';
            removeWaypointButton.className = 'remove-waypoint';
            removeWaypointButton.textContent = 'Remove';

            removeWaypointButton.addEventListener('click', () => {
                newWaypoint.remove();
            });

            newWaypoint.appendChild(newWaypointLabel);
            newWaypoint.appendChild(newWaypointInput);
            newWaypoint.appendChild(removeWaypointButton);

            waypointsContainer.appendChild(newWaypoint);

            nextWaypointNum++;
        });

        const removeWaypointButtons = document.querySelectorAll('.remove-waypoint');
        removeWaypointButtons.forEach(button => {
            button.addEventListener('click', () => {
                const waypoint = button.parentElement;
                waypoint.remove();
            });
        });
    </script>
</body>
</html>
